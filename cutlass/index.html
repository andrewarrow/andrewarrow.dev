<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="canonical" href="#">
  <title>Cutlass Revolutionary Video Automation</title>
  <meta name="description" content="Cutlass Revolutionary Video Automation">
  
  <meta property="og:image" content="https://i.imgur.com/r88C3Tw.png">
  <meta name="twitter:image" content="https://i.imgur.com/r88C3Tw.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  
  <meta property="og:title" content="swiss army knife for generating fcpxml files ">
  <meta property="og:description" content="swiss army knife for generating fcpxml files ">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="swiss army knife for generating fcpxml files ">
  <meta name="twitter:description" content="swiss army knife for generating fcpxml files ">
  <link rel="stylesheet" type="text/css" href="main.css">
  <link rel="icon" href="https://i.imgur.com/r88C3Tw.png" type="image/png">
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "n37yt2z2sm");
</script>
</head>
<body>
    <div class="header-logos">
        <a href="https://github.com/andrewarrow/cutlass" target="_blank">
            <svg class="github-logo" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0C5.374 0 0 5.373 0 12 0 17.302 3.438 21.8 8.207 23.387c.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/>
            </svg>
        </a>
    </div>
    <div class="container">
        <header>
            <img src="https://i.imgur.com/r88C3Tw.png" alt="Cutlass Logo" style="width: 80px; height: 80px; margin-bottom: 20px;">
            <h1>Cutlass: Final Cut Pro XML Generated</h1>
            <div>
              <iframe width="560" height="315" src="https://www.youtube.com/embed/V9r_Ihl0Tyc?si=M1INYwJF3YpebFaM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
        </header>
        
        <div class="content">
            <div class="section">
                <h2>Cutlass FCPXML Generation Framework</h2>
                <p>Welcome to the comprehensive documentation for the Cutlass FCPXML generation framework. This provides detailed guidance for working with Final Cut Pro XML files programmatically.</p>
                
                <h3>üö® Critical First Reads</h3>
                <p>Before diving into development, <strong>you must</strong> read these essential documents:</p>
                <ul>
                    <li><strong><a href="https://github.com/andrewarrow/cutlass/wiki/FCPXML-Generation-Best-Practices.md">FCPXML Generation Best Practices</a></strong> - Core rules and patterns</li>
                    <li><strong><a href="https://github.com/andrewarrow/cutlass/wiki/Images-vs-Videos-Architecture.md">Images vs Videos Architecture</a></strong> - Media type handling (prevents #1 crash cause)</li>
                    <li><strong><a href="https://github.com/andrewarrow/cutlass/wiki/Testing-and-Debugging.md">Testing and Debugging</a></strong> - Validation and troubleshooting</li>
                </ul>

                <h3>üìö Wiki Navigation</h3>
                
                <h4>Core Documentation</h4>
                <ul>
                    <li><strong><a href="https://github.com/andrewarrow/cutlass/wiki/Architecture-Overview.md">Architecture Overview</a></strong> - System design and patterns</li>
                    <li><strong><a href="https://github.com/andrewarrow/cutlass/wiki/FCPXML-Generation-Best-Practices.md">FCPXML Generation Best Practices</a></strong> - Critical rules and patterns</li>
                    <li><strong><a href="https://github.com/andrewarrow/cutlass/wiki/Images-vs-Videos-Architecture.md">Images vs Videos Architecture</a></strong> - Media type handling</li>
                    <li><strong><a href="https://github.com/andrewarrow/cutlass/wiki/Animation-and-Effects.md">Animation and Effects</a></strong> - Keyframes, animations, and effects</li>
                    <li><strong><a href="https://github.com/andrewarrow/cutlass/wiki/Testing-and-Debugging.md">Testing and Debugging</a></strong> - Validation and troubleshooting</li>
                    <li><strong><a href="https://github.com/andrewarrow/cutlass/wiki/API-Reference.md">API Reference</a></strong> - Complete function and type reference</li>
                </ul>

                <h4>Quick Reference</h4>
                <ul>
                    <li>Resource ID Management</li>
                    <li>Duration and Timing</li>
                    <li>Common Crash Patterns</li>
                    <li>Effect UID Verification</li>
                </ul>

                <h3>üõ°Ô∏è Critical Architecture Rules</h3>
                
                <h4>1. NO XML STRING TEMPLATES</h4>
                <p><strong>NEVER EVER generate XML from hardcoded string templates:</strong></p>
                <pre><code>‚ùå BAD: xml := "&lt;video ref=\"" + videoRef + "\"&gt;" + content + "&lt;/video&gt;"
‚ùå BAD: fmt.Sprintf("&lt;asset-clip ref=\"%s\" name=\"%s\"/&gt;", ref, name)
‚úÖ GOOD: xml.MarshalIndent(&amp;fcp.Video{Ref: videoRef, Name: name}, "", "    ")</code></pre>
                <p><strong>All FCPXML generation MUST use the fcp.* structs in the fcp package.</strong></p>

                <h4>2. CHANGE CODE NOT XML</h4>
                <p><strong>NEVER EVER only change problem xml in an xml file, always change the code that generates it too</strong></p>

                <h4>3. Images vs Videos Fundamentals</h4>
                <table style="border-collapse: collapse; width: 100%; margin: 20px 0;">
                    <tr style="background-color: #f5f5f5;">
                        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Media Type</th>
                        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Asset Duration</th>
                        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Format frameDuration</th>
                        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Spine Element</th>
                        <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Effects Support</th>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 12px;"><strong>Images</strong></td>
                        <td style="border: 1px solid #ddd; padding: 12px;">"0s" (timeless)</td>
                        <td style="border: 1px solid #ddd; padding: 12px;"><strong>NONE</strong></td>
                        <td style="border: 1px solid #ddd; padding: 12px;">&lt;video&gt;</td>
                        <td style="border: 1px solid #ddd; padding: 12px;">Simple only</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 12px;"><strong>Videos</strong></td>
                        <td style="border: 1px solid #ddd; padding: 12px;">Actual duration</td>
                        <td style="border: 1px solid #ddd; padding: 12px;">Required</td>
                        <td style="border: 1px solid #ddd; padding: 12px;">&lt;asset-clip&gt;</td>
                        <td style="border: 1px solid #ddd; padding: 12px;">Full support</td>
                    </tr>
                </table>

                <h3>üö® Top Crash Patterns to Avoid</h3>
                <ol>
                    <li><strong>AssetClip for images</strong> ‚Üí <code>addAssetClip:toObject:parentFormatID</code> crash</li>
                    <li><strong>frameDuration on image formats</strong> ‚Üí <code>performAudioPreflightCheckForObject</code> crash</li>
                    <li><strong>Complex effects on images</strong> ‚Üí Various import crashes</li>
                    <li><strong>Fictional effect UIDs</strong> ‚Üí "invalid effect ID" crashes</li>
                    <li><strong>Non-frame-aligned durations</strong> ‚Üí "not on edit frame boundary" errors</li>
                </ol>

                <h3>Resource ID Management</h3>
                <p>All IDs must be unique within the document:</p>
                <pre><code>// ‚úÖ GOOD: Use ResourceRegistry pattern
registry := fcp.NewResourceRegistry(fcpxml)
tx := fcp.NewTransaction(registry)
defer tx.Rollback()

ids := tx.ReserveIDs(3)
assetID := ids[0]    // "r2"
formatID := ids[1]   // "r3"
effectID := ids[2]   // "r4"

// ‚ùå BAD: Hardcoded IDs cause collisions
assetID := "r1"  // Will conflict with other generators</code></pre>

                <h3>Duration and Timing</h3>
                <p><strong>All durations MUST use <code>fcp.ConvertSecondsToFCPDuration()</code>:</strong></p>
                <pre><code>// ‚úÖ GOOD: Frame-aligned duration
duration := fcp.ConvertSecondsToFCPDuration(5.5)  // "132132/24000s"

// ‚ùå BAD: Decimal seconds cause drift
duration := "5.5s"  // Not frame-aligned</code></pre>
                <p>FCP uses 24000/1001 ‚âà 23.976 fps timebase for frame alignment.</p>

                <h3>Effect UID Verification</h3>
                <p><strong>ONLY use verified effect UIDs:</strong></p>
                
                <h4>‚úÖ Verified Working UIDs:</h4>
                <ul>
                    <li><strong>Gaussian Blur</strong>: <code>FFGaussianBlur</code></li>
                    <li><strong>Color Correction</strong>: <code>FFColorCorrection</code></li>
                    <li><strong>Text Title</strong>: <code>.../Titles.localized/Basic Text.localized/Text.localized/Text.moti</code></li>
                    <li><strong>Shape Mask</strong>: <code>FFSuperEllipseMask</code></li>
                </ul>

                <h4>‚úÖ Prefer built-in elements:</h4>
                <pre><code>// Spatial transformations - always safe
video.AdjustTransform = &amp;fcp.AdjustTransform{
    Position: "100 50",
    Scale:    "1.5 1.5",
}

// Cropping - always safe  
assetClip.AdjustCrop = &amp;fcp.AdjustCrop{
    Mode: "trim",
    TrimRect: &amp;fcp.TrimRect{Left: "0.1", Right: "0.9"},
}</code></pre>

                <h3>Required Architecture Pattern</h3>
                <p><strong>ALWAYS follow this pattern:</strong></p>
                <pre><code>func GenerateMyFeature(inputFile, outputFile string) error {
    // 1. Use existing infrastructure  
    fcpxml, err := fcp.GenerateEmpty("")
    if err != nil {
        return fmt.Errorf("failed to create base FCPXML: %v", err)
    }
    
    // 2. Use proper resource management
    registry := fcp.NewResourceRegistry(fcpxml)
    tx := fcp.NewTransaction(registry)
    defer tx.Rollback()
    
    // 3. Add content using existing functions
    if err := fcp.AddImage(fcpxml, imagePath, duration); err != nil {
        return err
    }
    
    // 4. Apply animations (simple transforms only for images)
    imageVideo := &amp;fcpxml.Library.Events[0].Projects[0].Sequences[0].Spine.Videos[0]
    imageVideo.AdjustTransform = createAnimation(duration, startTime)
    
    // 5. Commit and write
    if err := tx.Commit(); err != nil {
        return err
    }
    return fcp.WriteToFile(fcpxml, outputFile)
}</code></pre>

                <h3>Package Structure</h3>
                <pre><code>fcp/
‚îú‚îÄ‚îÄ types.go           # All FCPXML struct definitions
‚îú‚îÄ‚îÄ generator.go       # Core generation functions  
‚îú‚îÄ‚îÄ registry.go        # Resource ID management
‚îú‚îÄ‚îÄ transaction.go     # Transaction-based operations
‚îú‚îÄ‚îÄ ids.go            # ID generation utilities
‚îî‚îÄ‚îÄ *_test.go         # Comprehensive test patterns</code></pre>

                <h3>Getting Started</h3>
                <ol>
                    <li><strong>Read</strong> <a href="https://github.com/andrewarrow/cutlass/wiki/FCPXML-Generation-Best-Practices.md">FCPXML Generation Best Practices</a></li>
                    <li><strong>Study</strong> the test files in <code>fcp/*_test.go</code> for proven patterns</li>
                    <li><strong>Validate</strong> your code with <code>fcp.ValidateClaudeCompliance()</code></li>
                    <li><strong>Test</strong> imports in actual Final Cut Pro</li>
                </ol>

                <p><strong>Key Principle: Follow existing patterns in fcp/ package. If FCPXML generation requires more than 1 iteration to work, you're doing it wrong.</strong></p>
            </div>
            
            <div class="cta">
                <p style="font-size: 1.1em; margin-bottom: 30px;">Cutlass excels at generating impressive content at unprecedented scale and speed.</p>
                <a href="https://github.com/andrewarrow/cutlass" class="cta-button">Get Started with Cutlass</a>
            </div>
        </div>
    </div>
</body>
</html>
